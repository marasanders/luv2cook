"use strict";!function(){function e(e){e.state("categoryIndex",{url:"",templateUrl:"/views/categories/index.html",controller:"CategoryIndexController",controllerAs:"vm"}).state("categoryShow",{url:"/:id",templateUrl:"/views/categories/show.html",controller:"CategoryShowController",controllerAs:"vm"}).state("recipeEdit",{url:"/category/:category_id/recipes/:id/edit",templateUrl:"/views/recipes/edit.html",controller:"RecipeEditController",controllerAs:"vm"}).state("recipeShow",{url:"/category/:category_id/recipes/:id",templateUrl:"/views/recipes/show.html",controller:"RecipeShowController",controllerAs:"vm"})}function t(e,t){var r=this;r.category_data={};var i=e("/categories/:id.json",{},{update:{method:"PUT"}});r.category_data=t.query(),r.destroy=function(e){i.remove({id:e.id},function(t){t.success&&r.category_data.splice(r.category_data.indexOf(e),1)})},r.new_category=new t,r.create=function(){r.new_category.Cat_name?(i.save(r.new_category,function(e){e.success&&r.catgory_data.push(e),r.new_catgory=new t}),r.category_data.push(angular.copy(r.new_category))):alert("Category can not be blank!!"),r.new_category={}},r.update=function(e){i.update({id:e.id},e,function(){e.showEdit=!e.showEdit})}}function r(e){return e("/categories/:id.json",{},{update:{method:"PUT"}})}function i(e,t,r,i,n,o){var c=this,a=n("/recipes/:id.json",{},{update:{method:"PUT"}});e.get({id:i.id}).$promise.then(function(e){c.category=e}),t.query({category_id:i.id}).$promise.then(function(e){c.recipes=e}),c.destroy=function(e){var t=c.recipes[e];a.remove({id:t.id}),c.recipes.splice(e,1)},c.new_recipe=new t,c.create=function(){c.new_recipe.title?(c.new_recipe.$save({category_id:i.id},function(){t.query({category_id:i.id}).$promise.then(function(e){c.recipes=e;var t=e.sort(function(e,t){return new Date(e.created_at)-new Date(t.created_at)}),r={};r=t[e.length-1],o.go("recipeEdit",{id:r.id,category_id:i.id},{reload:!0})}),c.new_recipe=new t}),c.recipes.push(angular.copy(c.new_recipe))):alert("Recipe name can not be blank!!"),c.new_recipe={},c.ingredients={}}}function n(e){return e("/categories/:category_id/recipes/:id.json",{},{update:{method:"PUT"}})}function o(){return{query:function(){return["C","Tb","tsp","oz","stick(s)","piece(s)","head","whole","small","medium","large"]}}}function c(e,t,r,i,n,o){var c=this;e.get({id:n.category_id}).$promise.then(function(e){c.category=e}),t.get({category_id:n.category_id,id:n.id}).$promise.then(function(e){c.recipe=e}),c.ingredients=r.query({recipe_id:n.id});var a=o("/ingredients/:id.json",{},{update:{method:"PUT"}});c.measurements=i.query(),c.update=function(e){a.update({id:e.id},e,function(){})},c.destroy=function(e){a.remove({id:e.id},function(t){t.success&&c.ingredients.splice(c.ingredients.indexOf(e),1)})},c.new_ingredient=new r,c.create=function(){c.new_ingredient.$save({recipe_id:n.id},function(e){c.ingredients=r.query({recipe_id:n.id}),e.success&&c.new_ingredient.push(e),c.new_ingredient=new r}),c.ingredients.push(angular.copy(c.new_ingredient)),c.new_ingredient={}}}function a(e){return e("/recipes/:recipe_id/ingredients/:id.json",{},{update:{method:"PUT"}})}function d(e,t,r,i,n,o){var c=this;e.get({id:n.category_id}).$promise.then(function(e){c.category=e}),t.get({category_id:n.category_id,id:n.id}).$promise.then(function(e){c.recipe=e}),c.ingredients=r.query({recipe_id:n.id});var a=o("/ingredients/:id.json",{},{update:{method:"PUT"}});c.measurements=i.query(),c.updateRecipe=function(){c.recipe.$update({category_id:n.category_id,id:n.id}),function(){}},c.new_ingredient=new r,c.create=function(){c.new_ingredient.$save({recipe_id:n.id},function(e){c.ingredients=r.query({recipe_id:n.id}),e.success&&c.new_ingredient.push(e),c.new_ingredient=new r}),c.ingredients.push(angular.copy(c.new_ingredient)),c.new_ingredient={}},c.updateIngredient=function(e){a.update({id:e.id},e,function(){})},c.destroy=function(e){a.remove({id:e.id},function(t){t.success&&c.ingredients.splice(c.ingredients.indexOf(e),1)})}}angular.module("luv2cook",["ui.router","ngResource","categories"]).config(["$stateProvider","$locationProvider",e]).factory("CategoryFactory",["$resource",r]).factory("RecipeFactory",["$resource",n]).factory("IngredientFactory",["$resource",a]).factory("MeasurementsFactory",["$resource",o]).controller("CategoryIndexController",["$resource","CategoryFactory","$stateParams","$http","$state",t]).controller("CategoryShowController",["CategoryFactory","RecipeFactory","IngredientFactory","$stateParams","$resource","$state",i]).controller("RecipeShowController",["CategoryFactory","RecipeFactory","IngredientFactory","MeasurementsFactory","$stateParams","$resource","$state",c]).controller("RecipeEditController",["CategoryFactory","RecipeFactory","IngredientFactory","MeasurementsFactory","$stateParams","$resource","$state",d])}();